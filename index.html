<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
<style type="text/css">
  html { height: 100% }
  body { height: 100%; margin: 0px; padding: 0px }
  #map_canvas { height: 100% }
</style>
<script type="texxt/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js"></script>
<script type="text/javascript"
    src="http://maps.google.com/maps/api/js?sensor=false">
</script>
<script type="text/javascript">
  //the shortcut on this page
  //https://sites.google.com/site/gmapstips/export-my-map-as-kml
  //has a neat trick for extracting raw kml from a my map
  
  
  //idea is that we use polylines to, in steps draw a series of lat-lngs together, as described here: http://code.google.com/apis/maps/documentation/javascript/overlays.html#PolylineOptions
  //if we define a function that times this process, it could appear like an animation
  function initialize() {
    
    var myLatlng = new google.maps.LatLng(51.5421410, -0.1277350);
    var myOptions = {
      zoom: 10,
      center: myLatlng,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    }
  
    var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
  
  
    var ctaLayer = new google.maps.KmlLayer('http://dl.dropbox.com/u/5403549/doc.kml?1');

    ctaLayer.setMap(map);
    
  }
  
  function setMarkers(map, locations) {  
    
    var marker_image_url = "http://google-maps-icons.googlecode.com/files/purple0"
    var image = new google.maps.MarkerImage(marker_image_url,
      // This marker is 20 pixels wide by 32 pixels tall.
      new google.maps.Size(20, 32),
      // The origin for this image is 0,0.
      new google.maps.Point(0,0),
      // The anchor for this image is the base of the flagpole at 0,32.
      new google.maps.Point(0, 32));
    var shape = {
        coord: [1, 1, 1, 20, 18, 20, 18 , 1],
        type: 'poly'
    };
    
    for (var i = 0; i < locations.length; i++) {
      //put the right number on the marker
      var image = marker_image_url + (i + 1) + ".png"
      var location = locations[i];
      var myLatLng = new google.maps.LatLng(location[1], location[2]);
      var marker = new google.maps.Marker({
          position: myLatLng,
          map: map,
          icon: image,
          shape: shape,
          title: location[0]
      });
    }
  }
  

</script>
</head>
<body onload="initialize()">
  <div id="map_canvas" style="width: 700px; height:500px"></div>
  <a href="#"><div></div></a>
</body>
</html>


