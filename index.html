<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
  
<link rel="stylesheet" href="style.css" type="text/css"  /> 
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js"></script>
<script type="text/javascript"
    src="http://maps.google.com/maps/api/js?sensor=false">
</script>
<script type="text/javascript">
  //https://sites.google.com/site/gmapstips/export-my-map-as-kml
  //has a neat trick for extracting raw kml from a my map 
  //idea is that we use polylines to, in steps draw a series of lat-lngs together, as described here: http://code.google.com/apis/maps/documentation/javascript/overlays.html#PolylineOptions
  //if we define a function that times this process, it could appear like an animation

  $(document).ready (function(){
    
    initialize();
    $('.map').hide();
    $('#map_1').show();
       
    //manage clicks 
    $('.tab').click(function () {
      number = $(this).attr("id").replace('tab_', '')
      manage_tabs(number);
      manage_maps(number);
      show_route_details(number);
    });
    
  });
 
  var manage_tabs = function (number) {
    $('.tab').removeClass('tab_selected');
    $('#tab_' + number).addClass('tab_selected');
  }
  
  var manage_maps = function (number) {   
    $('.map').hide();
    $('#map_' + number).show();
  }
  
  var show_route_details = function(number) {
    route_name = "route_" + number
    details = routes_data[route_name]
    $("#route_details").html(
      "<span>" + "Name: " + details["name"] + "</span></br>" + 
      "<span>" + "Length: " + details["length"] + "</span></br>" + 
      "<span>" + "Time: " + details["time"] + "</span></br>" + 
      "<span>" + "Level: " + details["level"] + "</span></br>"
    )
  }
  
  var routes_data = {
    route_1: {
      name: "Cycle route 1",
      length: "5 miles",
      time: "3 hours",
      level: "Easy",
    },
    route_2: {
      name: "Cycle route 2",
      length: "5 miles",
      time: "1 hours",
      level: "Easy",
    },
    route_3: {
      name: "Cycle route 3",
      length: "5 miles",
      time: "7 hours",
      level: "Easy",
    },
    route_4: {
      name: "Cycle route 4",
      length: "5 miles",
      time: "12 hours",
      level: "Easy",
    }    
  }
  var initialize = function () {
    var map_1_centre = new google.maps.LatLng(51.5421410, -0.1277350);
    var map_2_centre = new google.maps.LatLng(51.5421410, -0.1277350);
    var map_3_centre = new google.maps.LatLng(51.5421410, -0.1277350);
    var map_4_centre = new google.maps.LatLng(51.5421410, -0.1277350);
       
    var myOptions = {
      zoom: 13,
      center: map_1_centre,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    }
    
    var map_1 = new google.maps.Map(document.getElementById("map_1"), myOptions)
    var map_2 = new google.maps.Map(document.getElementById("map_2"), myOptions)
    var map_3 = new google.maps.Map(document.getElementById("map_3"), myOptions)
    var map_4 = new google.maps.Map(document.getElementById("map_4"), myOptions)
    //bring in the kml layer
    
    var ctaLayer = new google.maps.KmlLayer('http://dl.dropbox.com/u/5403549/am_route_1.kml');

    ctaLayer.setMap(map_1);         
  }
 

</script>

</head>
<body>
  <div id="map_1" class="map"></div>
  <div id="map_2" class="map"></div>
  <div id="map_3" class="map"></div>
  <div id="map_4" class="map"></div>

  <div id="navigation">
    <div id="tab_1" class="tab"></div>
    <div id="tab_2" class="tab"></div>
    <div id="tab_3" class="tab"></div>
    <div id="tab_4" class="tab"></div>
  </div>
  
  <div id="route_details">
</body>
</html>


